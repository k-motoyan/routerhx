!function(){"use strict";function a(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=m++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}function b(a,b){for(var c="undefined"!=typeof window?window:exports,d=b.split("."),e=0;e<d.length-1;++e){var f=d[e];"undefined"==typeof c[f]&&(c[f]={}),c=c[f]}c[d[d.length-1]]=a}var c=function(){return j.Boot.__string_rec(this,"")},d=function(a,b){b=b.split("u").join(""),this.r=new RegExp(a,b)};d.__name__=!0,d.prototype={replace:function(a,b){return a.replace(this.r,b)},matched:function(a){return null!=this.r.m&&a>=0&&a<this.r.m.length?this.r.m[a]:function(){throw"EReg::matched"}(this)},match:function(a){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(a),this.r.s=a,null!=this.r.m},__class__:d};var e=function(){};e.__name__=!0,e.field=function(a,b){var c=null;try{c=a[b]}catch(d){}return c},e.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};var f=function(){};f.__name__=!0,f.string=function(a){return j.Boot.__string_rec(a,"")};var g=function(){};g.__name__=!0,g.replace=function(a,b,c){return a.split(b).join(c)};var h={__ename__:!0,__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};h.TNull=["TNull",0],h.TNull.toString=c,h.TNull.__enum__=h,h.TInt=["TInt",1],h.TInt.toString=c,h.TInt.__enum__=h,h.TFloat=["TFloat",2],h.TFloat.toString=c,h.TFloat.__enum__=h,h.TBool=["TBool",3],h.TBool.toString=c,h.TBool.__enum__=h,h.TObject=["TObject",4],h.TObject.toString=c,h.TObject.__enum__=h,h.TFunction=["TFunction",5],h.TFunction.toString=c,h.TFunction.__enum__=h,h.TClass=function(a){var b=["TClass",6,a];return b.__enum__=h,b.toString=c,b},h.TEnum=function(a){var b=["TEnum",7,a];return b.__enum__=h,b.toString=c,b},h.TUnknown=["TUnknown",8],h.TUnknown.toString=c,h.TUnknown.__enum__=h;var i=function(){};i.__name__=!0,i["typeof"]=function(a){var b=typeof a;switch(b){case"boolean":return h.TBool;case"string":return h.TClass(String);case"number":return Math.ceil(a)==a%2147483648?h.TInt:h.TFloat;case"object":if(null==a)return h.TNull;var c=a.__enum__;if(null!=c)return h.TEnum(c);var d=a.__class__;return null!=d?h.TClass(d):h.TObject;case"function":return a.__name__||a.__ename__?h.TObject:h.TFunction;case"undefined":return h.TNull;default:return h.TUnknown}};var j={};j.Boot=function(){},j.Boot.__name__=!0,j.Boot.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+j.Boot.__string_rec(a[g],b):j.Boot.__string_rec(a[g],b)}return d+")"}var g,h=a.length,d="[";b+="	";for(var f=0;h>f;){var i=f++;d+=(i>0?",":"")+j.Boot.__string_rec(a[i],b)}return d+="]"}var k;try{k=a.toString}catch(l){return"???"}if(null!=k&&k!=Object.toString){var m=a.toString();if("[object Object]"!=m)return m}var n=null,d="{\n";b+="	";var o=null!=a.hasOwnProperty;for(var n in a)(!o||a.hasOwnProperty(n))&&"prototype"!=n&&"__class__"!=n&&"__super__"!=n&&"__interfaces__"!=n&&"__properties__"!=n&&(2!=d.length&&(d+=", \n"),d+=b+n+" : "+j.Boot.__string_rec(a[n],b));return b=b.substring(1),d+="\n"+b+"}";case"function":return"<function>";case"string":return a;default:return String(a)}},j.Boot.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||j.Boot.__interfLoop(g,b))return!0}return j.Boot.__interfLoop(a.__super__,b)},j.Boot.__instanceof=function(a,b){if(null==b)return!1;switch(b){case n:return(0|a)===a;case p:return"number"==typeof a;case q:return"boolean"==typeof a;case String:return"string"==typeof a;case o:return!0;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return b==Array?null==a.__enum__:!0;if(j.Boot.__interfLoop(a.__class__,b))return!0}return b==r&&null!=a.__name__?!0:b==s&&null!=a.__ename__?!0:a.__enum__==b}},j.Boot.__cast=function(a,b){if(j.Boot.__instanceof(a,b))return a;throw"Cannot cast "+f.string(a)+" to "+f.string(b)},j.Browser=function(){},j.Browser.__name__=!0;var k={};k.Router=function(b){if(this.window=j.Browser.window,this.routes=[],this.options=i["typeof"](b)!=h.TNull?b:{notfound_path:"/404"},!(i["typeof"](this.window.history)!=h.TNull&&i["typeof"]((l=this.window.history,a(l,l.pushState)))!=h.TNull?!0:!1))throw"unusable push state this browser.";k.RouterEvent.init(),this._setPopState()},b(k.Router,"RouterHx"),k.Router.__name__=!0,k.Router.main=function(){},k.Router.prototype={_execObj:function(a,b,c){if(i["typeof"](e.getProperty(b,c))==h.TFunction)switch(e.field(b,c).apply(b,this._includeParams(a)),c){case"before":this.window.dispatchEvent(k.RouterEvent.eventBeforeEnd);break;case"after":this.window.dispatchEvent(k.RouterEvent.eventAfterEnd);break;default:this.window.dispatchEvent(k.RouterEvent.eventMainEnd)}},_execCb:function(a,b){b.apply(this,this._includeParams(a)),this.window.dispatchEvent(k.RouterEvent.eventMainEnd)},_checkUsablePushState:function(){return i["typeof"](this.window.history)!=h.TNull&&i["typeof"]((l=this.window.history,a(l,l.pushState)))!=h.TNull?!0:!1},_includeParams:function(a){var b=[],c=a.r.m.length;if(c=i["typeof"](c)==h.TNull?0:j.Boot.__cast(c,n),c>0)for(var d=1;c>d;){var e=d++;b.push(a.matched(e))}return b},_setPushState:function(a){this.window.history.pushState("","",a)},_setPopState:function(){var a=this;this.window.addEventListener("popstate",function(b){i["typeof"](b.state)!=h.TNull&&a.run(j.Browser.location.pathname,!0)})},_getDefaultOptions:function(){return{notfound_path:"/404"}},raisePushState:function(a,b,c,d){for(var e=this,f=i["typeof"](d)==h.TNull?j.Browser.document.querySelectorAll(a):d.querySelectorAll(a),g=0;g<f.length;){var k=f[g];++g;var l=[j.Boot.__cast(k,Element)];l[0].addEventListener(b,function(a){return function(b){e.run(a[0].getAttribute(c)),b.preventDefault()}}(l))}},run:function(a,b,c){null==b&&(b=!1),i["typeof"](a)==h.TNull&&(a=j.Browser.location.pathname);for(var d=0,e=this.routes;d<e.length;){var f=e[d];if(++d,1==f.url_pattern.match(a)){if(i["typeof"](this.before)!=h.TNull&&(this.before(),this.window.dispatchEvent(k.RouterEvent.eventGlobalBeforeEnd)),i["typeof"](f.cb)!=h.TNull)f.cb.apply(this,this._includeParams(f.url_pattern)),this.window.dispatchEvent(k.RouterEvent.eventMainEnd);else if(i["typeof"]!=f.object)for(var g=0,l=["before",f.method_name,"after"];g<l.length;){var m=l[g];++g,this._execObj(f.url_pattern,f.object,m)}return i["typeof"](this.after)!=h.TNull&&(this.after(),this.window.dispatchEvent(k.RouterEvent.eventGlobalAfterEnd)),void(b||(i["typeof"](c)==h.TNull?this.window.history.pushState("","",a):this.window.history.pushState("","",c)))}}this.run(this.options.notfound_path,!1,a)},setAfter:function(a){this.after=a},setBefore:function(a){this.before=a},addCb:function(a,b){a=g.replace(a,"/","\\/"),this.routes.push({url_pattern:new d("^"+k.Router.ROUTE_REGEX.replace(a,"([^\\/]+)")+"$",""),cb:b})},add:function(a,b,c){a=g.replace(a,"/","\\/"),this.routes.push({url_pattern:new d("^"+k.Router.ROUTE_REGEX.replace(a,"([^\\/]+)")+"$",""),object:b,method_name:c})},__class__:k.Router},k.RouterEvent=function(){},k.RouterEvent.__name__=!0,k.RouterEvent.init=function(){k.RouterEvent.eventGlobalBeforeEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventGlobalBeforeEnd.initEvent("globalBeforeEnd",!1,!0),k.RouterEvent.eventGlobalAfterEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventGlobalAfterEnd.initEvent("globalAfterEnd",!1,!0),k.RouterEvent.eventBeforeEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventBeforeEnd.initEvent("beforeEnd",!1,!0),k.RouterEvent.eventAfterEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventAfterEnd.initEvent("afterEnd",!1,!0),k.RouterEvent.eventMainEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventMainEnd.initEvent("mainEnd",!1,!0)},k.RouterEvent.createGlobalBeforeEnd=function(){k.RouterEvent.eventGlobalBeforeEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventGlobalBeforeEnd.initEvent("globalBeforeEnd",!1,!0)},k.RouterEvent.createGlobalAfterEnd=function(){k.RouterEvent.eventGlobalAfterEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventGlobalAfterEnd.initEvent("globalAfterEnd",!1,!0)},k.RouterEvent.createBeforeEnd=function(){k.RouterEvent.eventBeforeEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventBeforeEnd.initEvent("beforeEnd",!1,!0)},k.RouterEvent.createAfterEnd=function(){k.RouterEvent.eventAfterEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventAfterEnd.initEvent("afterEnd",!1,!0)},k.RouterEvent.createMainEnd=function(){k.RouterEvent.eventMainEnd=j.Browser.document.createEvent("CustomEvent"),k.RouterEvent.eventMainEnd.initEvent("mainEnd",!1,!0)};var l,m=0;Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(a){return isFinite(a)},Math.isNaN=function(a){return isNaN(a)},String.prototype.__class__=String,String.__name__=!0,Array.prototype.__class__=Array,Array.__name__=!0;var n={__name__:["Int"]},o={__name__:["Dynamic"]},p=Number;p.__name__=["Float"];var q=Boolean;q.__ename__=["Bool"];var r={__name__:["Class"]},s={};j.Browser.window="undefined"!=typeof window?window:null,j.Browser.document="undefined"!=typeof window?window.document:null,j.Browser.location="undefined"!=typeof window?window.location:null,k.Router.BEFORE_METHOD_NAME="before",k.Router.AFTER_METHOD_NAME="after",k.Router.ROUTE_REGEX=new d("<[^/]+>","g"),k.Router.main()}();